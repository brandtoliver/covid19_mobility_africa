<!-- HTML -->
<!-- ---- -->
<!DOCTYPE html>
<meta charset="utf-8">

<!-- Div that SVG objects are appended to -->
<div class="flex">
	<div id="slider-movementsFig"></div>
	<div class="radio-timeframe" id='radio-movementsFig'></div>
</div>
<div class="flex flex-col">
	<div class='vis' id='container' style="position: relative;">
		<div class='vis' id='vis-movementsFig1'></div>
		<div class='vis' id='vis-movementsFig2'></div>
	</div>

</div>


<!-- JavaScript -->
<!-- ---------- -->

<!-- Code -->
<script>

	let spinnermovements = new Spinner(spinnerOpts).spin(document.getElementById('vis-movementsFig'));

	let instance_movements;
	d3.json("/data/" + sessionStorage.country + "tile_geojson.json").then(function (geoData) {
		d3.json('/data/' + sessionStorage.country + '_movements_between_tiles.json').then(function (data) {
			d3.json('/data/' + sessionStorage.country + '.geojson').then(function (geoshape) {
				spinnermovements.stop();
				instance_movements = new MovementsMapTile(data, geoData, 'movementsFig1', geoshape);
				instance_movements.setup();
				instance_movements.drawLayout();
				instance_movements.drawData();
				instance_movements.renderStates();
			})
		})
	})

</script>